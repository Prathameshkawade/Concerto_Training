const foodItem = [
  {
    id: 0,
    name: "Ambur Biryani",
    category: "biryani",
    rating: 4.3,
    price: 13,
    img: "images/biryani/Ambur-Chicken-Biryani.jpg",
    quantity: 1,
  },
  {
    id: 1,
    name: "Hyderabadi Biryani",
    category: "biryani",
    rating: 4.3,
    price: 15,
    img: "images/biryani/Chicken-Biryani-hyd.jpg",
    quantity: 1,
  },
  {
    id: 2,
    name: "Egg Biryani",
    category: "biryani",
    rating: 4.3,
    price: 18,
    img: "images/biryani/egg-biryani.jpeg",
    quantity: 1,
  },
  {
    id: 3,
    name: "Goan Fish Biryani",
    category: "biryani",
    rating: 4.3,
    price: 15,
    img: "images/biryani/goan-fish-biryani.jpg",
    quantity: 1,
  },
  {
    id: 4,
    name: "Mutton Biryani",
    category: "biryani",
    rating: 4.3,
    price: 10,
    img: "images/biryani/hyd-Mutton-Biryani.jpg",
    quantity: 1,
  },
  {
    id: 5,
    name: "Kamrupi Biryani",
    category: "biryani",
    rating: 4.3,
    price: 12,
    img: "images/biryani/kamrupi-biryani.jpg",
    quantity: 1,
  },
  {
    id: 6,
    name: "Kashmiri Biryani",
    category: "biryani",
    rating: 4.3,
    price: 13,
    img: "images/biryani/kashmiri.pulao.jpg",
    quantity: 1,
  },
  {
    id: 7,
    name: "Memoni Biryani",
    category: "biryani",
    rating: 4.3,
    price: 20,
    img: "images/biryani/memonibiryani.png",
    quantity: 1,
  },
  {
    id: 8,
    name: "Mughlai Biryani",
    category: "biryani",
    rating: 4.3,
    price: 15,
    img: "images/biryani/mughlai-biryani.jpg",
    quantity: 1,
  },
  {
    id: 9,
    name: "Chicken Roast",
    category: "chicken",
    rating: 4.3,
    price: 11,
    img: "images/chicken/Chicken_roast.jpg",
    quantity: 1,
  },
  {
    id: 10,
    name: "Chicken Curry",
    category: "chicken",
    rating: 4.3,
    price: 10,
    img: "images/chicken/Chicken-Curry.jpg",
    quantity: 1,
  },
  {
    id: 11,
    name: "Chicken Do Pyaza",
    category: "chicken",
    rating: 4.3,
    price: 14,
    img: "images/chicken/Chicken-do-Pyaza.jpg",
    quantity: 1,
  },
  {
    id: 12,
    name: "Chicken Masala",
    category: "chicken",
    rating: 4.3,
    price: 12,
    img: "images/chicken/Chicken-Masala.jpeg",
    quantity: 1,
  },
  {
    id: 13,
    name: "Handi Chicken",
    category: "chicken",
    rating: 4.3,
    price: 17,
    img: "images/chicken/Handi-chicken.jpg",
    quantity: 1,
  },
  {
    id: 14,
    name: "Murgh Musallam",
    category: "chicken",
    rating: 4.3,
    price: 20,
    img: "images/chicken/Murgh-Musallam.jpg",
    quantity: 1,
  },
  {
    id: 15,
    name: "Matar Paneer",
    category: "paneer",
    rating: 4.3,
    price: 15,
    img: "images/paneer/Matar-Paneer.jpg",
    quantity: 1,
  },
  {
    id: 16,
    name: "Palak Paneer",
    category: "paneer",
    rating: 4.3,
    price: 10,
    img: "images/paneer/palak-paneer.jpg",
    quantity: 1,
  },
  {
    id: 17,
    name: "Paneer Butter Masala",
    category: "paneer",
    rating: 4.3,
    price: 15,
    img: "images/paneer/paneer-butter-masala.jpg",
    quantity: 1,
  },
  {
    id: 18,
    name: "Paneer Do Pyaza",
    category: "paneer",
    rating: 4.3,
    price: 12,
    img: "images/paneer/Paneer-Do-Pyaza.jpg",
    quantity: 1,
  },
  {
    id: 19,
    name: "Hyderabadi Paneer",
    category: "paneer",
    rating: 4.3,
    price: 8,
    img: "images/paneer/Paneer-Hyderabadi.jpg",
    quantity: 1,
  },
  {
    id: 20,
    name: "Paneer Lababdar",
    category: "paneer",
    rating: 4.3,
    price: 7,
    img: "images/paneer/paneer-lababdar.jpg",
    quantity: 1,
  },
  {
    id: 21,
    name: "Shahi Paneer",
    age: "32",
    category: "paneer",
    rating: 4.3,
    price: 5,
    img: "images/paneer/shahi-paneer.jpg",
    quantity: 1,
  },
  {
    id: 22,
    name: "Navratan Korma",
    category: "vegetable",
    rating: 4.3,
    price: 8,
    img: "images/vegetable/navratan-korma_-vegetable.png",
    quantity: 1,
  },
  {
    id: 23,
    name: "Veg Jalfrezi",
    category: "vegetable",
    rating: 4.3,
    price: 7,
    img: "images/vegetable/VEG-JALFREZI.jpg",
    quantity: 1,
  },
  {
    id: 24,
    name: "Veg Biryani",
    category: "vegetable",
    rating: 4.3,
    price: 5,
    img: "images/vegetable/vegetable-biryani.jpg",
    quantity: 1,
  },
  {
    id: 25,
    name: "Veg Curry",
    category: "vegetable",
    rating: 4.3,
    price: 7,
    img: "images/vegetable/vegetable-curry.jpeg",
    quantity: 1,
  },
  {
    id: 26,
    name: "Veg Kolhapur",
    category: "vegetable",
    rating: 4.3,
    price: 10,
    img: "images/vegetable/vegetable-kolhapuri.jpg",
    quantity: 1,
  },
  {
    id: 27,
    name: "Veg Masala",
    category: "vegetable",
    rating: 4.3,
    price: 4,
    img: "images/vegetable/vegetable-masala.jpg",
    quantity: 1,
  },
  {
    id: 28,
    name: "Veg Pakora",
    category: "vegetable",
    rating: 4.3,
    price: 4,
    img: "images/vegetable/vegetable-pakora.jpg",
    quantity: 1,
  },
  {
    id: 29,
    name: "Momos",
    category: "chinese",
    rating: 4.3,
    price: 8,
    img: "images/chinese/cabbage-momos-.jpg",
    quantity: 1,
  },
  {
    id: 30,
    name: "Chicken Manchurian",
    category: "chinese",
    rating: 4.3,
    price: 7,
    img: "images/chinese/ChickenManchurian.jpg",
    quantity: 1,
  },
  {
    id: 31,
    name: "Chili Chicken",
    category: "chinese",
    rating: 4.3,
    price: 5,
    img: "images/chinese/Chili-Chicken.jpg",
    quantity: 1,
  },
  {
    id: 32,
    name: "Chowmein",
    category: "chinese",
    rating: 4.3,
    price: 16,
    img: "images/chinese/chowmin.jpg",
    quantity: 1,
  },
  {
    id: 33,
    name: "Spring Roll",
    category: "chinese",
    rating: 4.3,
    price: 14,
    img: "images/chinese/spring-rolls.jpg",
    quantity: 1,
  },
  {
    id: 34,
    name: "Szechuan Chicken",
    category: "chinese",
    rating: 4.3,
    price: 10,
    img: "images/chinese/szechuan-chicken.jpg",
    quantity: 1,
  },
  {
    id: 35,
    name: "Fried Rice",
    category: "chinese",
    rating: 4.3,
    price: 8,
    img: "images/chinese/veg-fried-rice.jpg",
    quantity: 1,
  },
  {
    id: 36,
    name: "Butter Masala Dosa",
    category: "south indian",
    rating: 4.3,
    price: 18,
    img: "images/south indian/Butter-Masala-Dosa.png",
    quantity: 1,
  },
  {
    id: 37,
    name: "Idli",
    category: "south indian",
    rating: 4.3,
    price: 20,
    img: "images/south indian/idli-with-rice-flour.jpg",
    quantity: 1,
  },
  {
    id: 38,
    name: "Masala Dosa",
    category: "south indian",
    rating: 4.3,
    price: 12,
    img: "images/south indian/masala-dosa.jpg",
    quantity: 1,
  },
  {
    id: 39,
    name: "Mysore Bonda",
    category: "south indian",
    rating: 4.3,
    price: 10,
    img: "images/south indian/mysore-bonda.jpg",
    quantity: 1,
  },
  {
    id: 40,
    name: "Onion Uttapam",
    category: "south indian",
    rating: 4.3,
    price: 15,
    img: "images/south indian/onion-uttapam.jpg",
    quantity: 1,
  },
  {
    id: 41,
    name: "Plain Dosa",
    category: "south indian",
    rating: 4.3,
    price: 40,
    img: "images/south indian/plain-dosa.jpeg",
    quantity: 1,
  },
  {
    id: 42,
    name: "Rava Uttapam",
    category: "south indian",
    rating: 4.3,
    price: 25,
    img: "images/south indian/Rava-Uttapam.jpg",
    quantity: 1,
  },
  {
    id: 43,
    name: "Sambhar Vada",
    category: "south indian",
    rating: 4.3,
    price: 34,
    img: "images/south indian/sambhar-vada.jpg",
    quantity: 1,
  },
];
var cartele = document.getElementById('cart-page')
cartele.style.display = 'none'
var foodele = document.getElementById('food')
foodele.style.display = 'block'

displayItems();

function displayItem(item) {
   cartele.style.display = 'none'
   foodele.style.display = 'block'
  var html = "";
  item.map((item) => {
    html += `<div class='row text-center item'>
            <div class="col-md-3">
            <img class='img-fluid' src='./${item.img}' width="150px" height="150px"/>
        </div>
        <div class="col-md-2">
            <h3>${item.name}</h3>
        </div>
        <div class="col-md-2">
          <h3>${item.price}</h3>
        </div>
        <div class="col-md-2">
          <h3>${item.rating}</h3>
        </div>
        <div class="col-md-2">
            <h3><input type='checkbox' id='ch${item.id}' onClick='checkboxes(${item.id})'/></h3>
        </div>
        </div> <hr>`;
  });
  return html;
}

function displayItems() {

  for (i = 0; i < foodItem.length; i++) {
    document.getElementById('items').innerHTML += `<div class="row text-center m-b-5">
                      <div class="col-md-3 text-center" style="margin:auto ;">
                          <h3><img src ="${foodItem[i].img}" width="150px" height="150px" ></h3>
                      </div>
                      <div class="col-md-2" style="margin:auto ;">
                          <h3>${foodItem[i].name}</h3>
                      </div>
                      <div class="col-md-2" style="margin:auto ;">
                          <h3>${foodItem[i].price}</h3>
                      </div>
                      <div class="col-md-2" style="margin:auto ;">
                          <h3>${foodItem[i].rating}</h3>
                      </div>
                      <div class="col-md-2" style="margin:auto ;">
                          <h3> <input type="checkbox" id="ch${foodItem[i].id}" onclick= "checkboxes(${foodItem[i].id})"></h3>
                      </div> <hr>`
  }

}



var cartData = [];

function checkboxes(item) {

  var id = parseInt(item);
  var itemtoadd = foodItem.find((item) => item.id === id);

  if (cartData.indexOf(itemtoadd) == -1) {
    cartData = [...cartData, itemtoadd];
  }
  else {
    alert('item already added in the cart')
    var ele = document.getElementById(`ch${item}`)
    ele.checked = true;
  }
  document.getElementById("itemdisplay").innerHTML = `<i class="fa fa-cart-plus" style="color: white;" id="cart-plus" default =0> ${cartData.length} Items <button class="btn btn-success" onclick="cartItems(${id})">Add To Cart</button></i>`;
}



function cartItems() {
  foodele.style.display='none'
   cartele.style.display ='block';

  document.getElementById('items').innerHTML = '';
  document.getElementById('table-body').innerHTML = '';

  for (i = 0; i < cartData.length; i++) {
    document.getElementById('table-body').innerHTML += ` <tr>
  <td><img src ="${cartData[i].img}" width="150px" height="150px"></td>
  <td>${cartData[i].name}</td>
  <td><button class="btn btn-danger" onclick="decrementItem(event)" id =${cartData[i].id}>-</button><span id="span0">${cartData[i].quantity}</span><button class="btn btn-success" onclick="incrementItem(event)" id =${cartData[i].id}>+</button></td>
  <td>${cartData[i].price}</td> </tr>`
  }
  totalAmount()

}


function totalAmount() {
  var sum = 0;
  cartData.map((item) => {
    sum += item.price;
  });
  document.getElementById("total-price").innerText = "Total Price : " + sum +"₹";
}

function incrementItem(event) {


  let id = event.target.id;
  let itemInCart = cartData.find(
    (itemincart) => itemincart.id === parseInt(id)
  );
  itemInCart.quantity += 1;
  curPrice = (itemInCart.price * itemInCart.quantity - itemInCart.price * (itemInCart.quantity - 1)) / (itemInCart.quantity - 1);
  itemInCart.price = curPrice * itemInCart.quantity;
  cartItems();
  totalAmount();
}

function decrementItem(event) {

  let id = event.target.id;
  let itemToDecr = cartData.find(
    (itemincart) => itemincart.id === parseInt(id)
  );
  let idx = cartData.indexOf(itemToDecr);
  if (itemToDecr.quantity > 1) {
    curPrice = (itemToDecr.quantity * itemToDecr.price - itemToDecr.price * (itemToDecr.quantity - 1)) / itemToDecr.quantity;
    itemToDecr.quantity -= 1;
    itemToDecr.price = itemToDecr.quantity * curPrice;
  } else {
    cartData.splice(idx, 1);
    document.getElementById("cart-plus").innerText = "" + cartData.length + " items";
    if (cartData.length < 1) {
      foodele.style.display = 'block'
      cartele.style.display = 'none';
      alert("Currently no items in the cart");
      displayItems();
      return;
    }
  }
  totalAmount();
  cartItems();
}


function changeVal() {
  var numfilter = document.getElementById("dropdown");


  if (numfilter.value == 1) {

    var item = foodItem.filter(myfunc);

    function myfunc(array1) {
      var array2 = array1.category === "biryani";
      return array2;
    }

    document.getElementById('items').innerHTML = '';

    document.getElementById('items').innerHTML += displayItem(item);

  }

  if (numfilter.value == 2) {

    var item = foodItem.filter(myfunc);

    function myfunc(array1) {
      var array2 = array1.category === "chicken";
      return array2;
    }

    document.getElementById('items').innerHTML = '';
    document.getElementById('items').innerHTML += displayItem(item);

  }


  if (numfilter.value == 3) {

    var item = foodItem.filter(myfunc);

    function myfunc(array1) {
      var array2 = array1.category === "chinese";
      return array2;
    }

    document.getElementById('items').innerHTML = '';

    document.getElementById('items').innerHTML += displayItem(item);

  }



  if (numfilter.value == 4) {

    var item = foodItem.filter(myfunc);

    function myfunc(array1) {
      var array2 = array1.category === "paneer";
      return array2;
    }

    document.getElementById('items').innerHTML = '';

    document.getElementById('items').innerHTML += displayItem(item);

  }


  if (numfilter.value == 5) {

    var item = foodItem.filter(myfunc);

    function myfunc(array1) {
      var array2 = array1.category === "south indian";
      return array2;
    }

    document.getElementById('items').innerHTML = '';

    document.getElementById('items').innerHTML += displayItem(item);

  }


  if (numfilter.value == 6) {

    var item = foodItem.filter(myfunc);

    function myfunc(array1) {
      var array2 = array1.category === "vegetable";
      return array2;
    }

    document.getElementById('items').innerHTML = '';

    document.getElementById('items').innerHTML += displayItem(item);

  }
}
